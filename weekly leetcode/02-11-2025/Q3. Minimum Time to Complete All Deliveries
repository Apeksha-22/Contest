class Solution {
public:
    long long minimumTime(vector<int>& d, vector<int>& r) {
        long long d1 = d[0], d2 = d[1];
        long long r1 = r[0], r2 = r[1];

        auto lcm = [&](long long a, long long b) {
            return a / gcd(a, b) * b;
        };

        auto ok = [&](long long T) -> bool {
            long long av1 = T - T / r1;
            long long av2 = T - T / r2;
            long long bth = T / lcm(r1, r2);
            long long cap = T - bth;
            return av1 >= d1 && av2 >= d2 && (d1 + d2) <= cap;
        };

        long long lo = 1;
        long long hi = (d1 + d2) * max(r1, r2);
        long long ans = hi;
        while (lo <= hi) {
            long long mid = lo + (hi - lo) / 2;
            if (ok(mid)) {
                ans = mid;
                hi = mid - 1;
            } else
                lo = mid + 1;
        }
        return ans;
    }
};

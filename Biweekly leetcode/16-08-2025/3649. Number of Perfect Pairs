class Solution {
public:
    long long perfectPairs(vector<int>& nums) {
        vector<long long> arr(nums.begin(), nums.end());
        int n = arr.size();
        for (int i = 0; i < n; ++i)
            if (arr[i] < 0)
                arr[i] = -arr[i];
        sort(arr.begin(), arr.end());
        long long ans = 0;
        int j = 0;
        for (int i = 0; i < n; ++i) {
            if (j < i + 1)
                j = i + 1;
            while (j < n && arr[j] <= 2 * arr[i])
                ++j;
            ans += (j - i - 1);
        }
        return ans;
    }
};
